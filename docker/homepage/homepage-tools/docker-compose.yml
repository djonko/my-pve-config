services:
  homepage:
    image: ghcr.io/gethomepage/homepage:latest
    container_name: homepage
    env_file:
      - /opt/data-etc/homepage/config.env
    environment:
      - PUID=1000 # Change to your user's PUID
      - PGID=1000 # Change to your user's PGID
      - HOMEPAGE_ALLOWED_HOSTS=*
    ports:
      - "3000:3000" # Or your preferred host port for Homepage
    volumes:
      - /opt/data-docker/homepage/config:/app/config # Mount your Homepage config directory
      - /opt/data-docker/homepage/images:/images # Mount your Homepage images directory
      # - /var/run/docker.sock:/var/run/docker.sock:ro # Optional: if using Docker integrations
    restart: unless-stopped

  homepage-editor:
    # Replace with the actual published image name once available:
    # image: ghcr.io/aicodebitsbeyond/homepage-editor:latest
    # For local builds (if you cloned the repository):
    image: docker.io/library/homepageeditor:latest
    container_name: homepage-editor
    ports:
      - "3001:3000" # Host port 3001 mapped to container port 3000
    volumes:
      # IMPORTANT: Mount the *same* configuration and image directory used by your Homepage container
      - /opt/data-docker/homepage/config:/config
      - /opt/data-docker/homepage/images:/images
      # Persistent data for the editor (user database, editor settings)
      - /opt/data-docker/homepage/editor/:/data
      # Optional: Mount your .env file if Homepage uses it for {{HOMEPAGE_VAR_...}}
      # Ensure this .env file is in the root of your Docker Compose project or adjust path.
      - /opt/data-etc/homepage/config.env:/compose_root/.env:ro
    environment:
      # IMPORTANT: Set a strong, unique secret for JWT authentication!
      - JWT_SECRET=your_very_strong_and_unique_secret_key
      # Optional: Specify user and group IDs if needed, otherwise defaults should work.
      - PUID=1000
      - PGID=1000
    # user: "1000:1000" # If your image runs as non-root and needs specific UIDs
    restart: unless-stopped
    # depends_on:
    #   - homepage # Optional: if you want Homepage to start first
